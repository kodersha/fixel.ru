<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><title>Кат в Эгее</title><meta name="description" content="Эгея не имеет функции скрытия длинных постов под катом, однако кат в Эгее можно сделать с использованием скрипта..."><meta name="keywords" content="Блог, Веб, Гайд, Эгея, "><meta name="author" content="Александра Травкина"><meta name="developer" content="hello@fixel.ru"><link rel="canonical" href="https://fixel.ru/kat-v-egee/"><meta property="og:title" content="Кат в Эгее"><meta property="og:site_name" content="Александра Травкина"><meta property="og:description" content="Эгея не имеет функции скрытия длинных постов под катом, однако кат в Эгее можно сделать с использованием скрипта..."><meta property="og:url" content="https://fixel.ru/kat-v-egee/"><meta property="og:type" content="article"><link rel="alternate" type="application/atom+xml" href="https://fixel.ru/feed.xml"><link rel="alternate" type="application/json" href="https://fixel.ru/feed.json"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="apple-touch-icon" sizes="180x180" href="https://fixel.ru/assets/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://fixel.ru/assets/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://fixel.ru/assets/favicon/favicon-16x16.png"><link rel="manifest" href="https://fixel.ru/assets/favicon/site.webmanifest"><link rel="mask-icon" href="https://fixel.ru/assets/favicon/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification" content="dwjd3hkjvkoN4sqwgiC9Mgf5tTpjN8XDhuYDWACpsII"><meta name="yandex-verification" content="f96ef0e811161c03"><meta name="mailru-verification" content="cfccb8882d571397"><link rel="stylesheet" href="https://fixel.ru/assets/css/style.css?v=8d6f4ef93842426b503fe7f3a42c2161"><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(50392522, "init", { clickmap: true, trackLinks: true, accurateTrackBounce: true, trackHash: true });</script><noscript><div><img src="https://mc.yandex.ru/watch/50392522" style="position:absolute; left:-9999px;" alt=""></div></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fixel.ru/kat-v-egee/"},"headline":"Кат в Эгее","datePublished":"2021-03-14T05:21","dateModified":"2021-03-14T19:51","description":"Эгея не имеет функции скрытия длинных постов под катом, однако кат в Эгее можно сделать с использованием скрипта...","author":{"@type":"Person","name":"Блог"},"publisher":{"@type":"Organization","name":"Блог"}}</script></head><body columns="32"><nav cell="10-23" cell-s="3-30" class="mt-10 breadcrumbs"><div class="breadcrumbs-content"><div class="row row-middle-xs"><div class="col-xs-shrink pr-00"><p><a class="logo" href="https://fixel.ru/"><img class="rounded-circle" srcset="https://fixel.ru/assets/images/avatar_96x96.png 2x, https://fixel.ru/assets/images/avatar_192x192.png 4x" src="https://fixel.ru/assets/images/avatar_48x48.png" width="48" height="48" alt="Александра Травкина"></a></p></div><div class="col-xs-shrink"><p><a href="https://fixel.ru/">Александра Травкина</a></p></div><div class="col-xs-shrink px-00"><p><i class="las la-angle-left"></i></p></div><div class="col-xs-shrink"><p><a href="https://fixel.ru/all/blog">Блог</a></p></div><div class="col-xs-shrink px-00 hidden-from-mobile"><p><i class="las la-angle-left"></i></p></div><div class="col-xs hidden-from-mobile"><p>Кат в Эгее</p></div></div></div></nav><main cell="row" cell-s="row" class="my-30 mt-desktop-80 mb-desktop-50"><article columns="32" class="post-article"><h1 class="title">Кат в Эгее</h1><p class="mt-10 mt-desktop-20 mb-20 mb-desktop-50 lead"><a href="https://blogengine.ru/" rel="nofollow noopener" target="_blank">Эгея</a> не имеет функции скрытия длинных постов под катом, <a href="https://ilyabirman.ru/meanwhile/all/no-cut-in-aegea/" target="_blank" rel="nofollow noopener noreferrer">в этой статье</a> Илья Бирман объясняет почему. Однако кат в Эгее можно сделать с использованием скрипта <a href="http://jedfoster.com/Readmore.js/" rel="nofollow noopener" target="_blank">readmore.js</a>. Особенность readmore.js в том, что раскрывать длинные записи для чтения можно без перезагрузки страницы и новых вкладок в браузере.</p><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/39/01.jpg" alt="" width="1018" height="475"></figure><p>Скачайте скрипт <a href="https://github.com/jedfoster/Readmore.js" target="_blank" rel="nofollow noopener noreferrer">readmore.js с GitHub</a> и поместите файл readmore.min.js в папку js, которую нужно создать в корне вашего шаблона Эгеи, например в корне стандартного шаблона plain:</p><pre><code>../themes/plain/js/readmore.min.js</code></pre><p>После, создадим файл template.js в папке js шаблона plain, в нём будем настраивать сам скрипт. Добавим в созданный файл настройки, полный список которых можно посмотреть на странице скрипта readmore.js на GitHub.</p><pre>$('.e2-note-short').readmore({<br>    speed: 75, // Скорость раскрытия ката<br>    collapsedHeight: 1250, // Длинна заметки после которой будет добавлен кат<br>    moreLink: '&lt;div class="more"&gt;&lt;a class="morelink" href="#"&gt;Показать полностью&lt;/a&gt;&lt;/div&gt;', // Классы кнопки раскрытия ката<br>    lessLink: '' // Классы кнопки скрытия ката<br>});</pre><p>Теперь нужно добавить класс .e2-note-short, благодаря которому будет добавляться кат к вашим записям, для этого нужно скопировать файл из:</p><pre>../system/theme/templates/notes.tmpl.php</pre><p>И поместить в папку templates шаблона:</p><pre>../themes/plain/templates/notes.tmpl.php</pre><p>Откроем скопированный notes.tmpl.php, где добавим к тегу &lt;article&gt; класс e2-note-short обернув его php параметром, чтобы кат не работал на отдельной странице с записью, а только в ленте постов на главной.</p><pre>&lt;article class="&lt;?php if ($content['class'] != 'note') { ?&gt;e2-note-short&lt;?php } ?&gt;"&gt;</pre><p>Далее, в папке styles шаблона создадим файл style.css где будут стили кнопки ката. В дальнейшем в этот css можно добавлять любые собственные стили, без конфликта с основными стилями шаблона Эгеи.</p><pre>../themes/plain/styles/style.css</pre><p>Добавим стили ката, при желании их можно отредактировать на свое усмотрение.</p><pre>.more {<br>    position: relative;<br>}<br>.more::before {<br>    content: "";<br>    background: -moz-linear-gradient(top, rgba(255,255,255,0) 40%, rgba(255,255,255,1) 80%);<br>    background: -webkit-linear-gradient(top, rgba(255,255,255,0) 40%,rgba(255,255,255,1) 80%);<br>    background: linear-gradient(to bottom, rgba(255,255,255,0) 40%,rgba(255,255,255,1) 80%);<br>    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 ); <br>    pointer-events: none;<br>    position: absolute;<br>    display: block;<br>    height: 150px;<br>    width: 100%;<br>    top: -150px;<br>    left: 0;<br>}<br>a.morelink {<br>    -webkit-border-radius: 2px;<br>    -moz-border-radius: 2px;<br>    border-radius: 2px;<br>    background: #f1f3f4;<br>    text-align: center;<br>    max-width: 720px;<br>    color: #8890a7;<br>    font-size: 14px;<br>    display: block;<br>    width: 100%;<br>    margin-bottom: 1em;<br>    border-bottom: 0;<br>    padding: 10px;<br>}<br>a.morelink:hover {<br>    background: #e2e5e6;<br>    color: #8890a7;<br>}</pre><p>Теперь необходимо подключить все созданные файлы непосредственно в шаблон, для этого копируем main.tmpl.php из основных файлов Эгеи:</p><pre>../system/theme/templates/main.tmpl.php</pre><p>В папку templates шаблона:</p><pre>../themes/plain/templates/main.tmpl.php</pre><p>Отредактируем main.tmpl.php добавив стили после основных стилей &lt;?php _CSS ('main') ?&gt; в конце файла.</p><pre>&lt;?php _CSS ('style') ?&gt;</pre><p>А после основных скриптов шаблона, &lt;?php _JS ('main') ?&gt;, подключим сам скрипт readmore.js и файл скрипта с его настройками.</p><pre>&lt;?php _JS ('readmore.min') ?&gt;<br>&lt;?php _JS ('template') ?&gt;</pre><p>Всё, кат добавлен в Эгею. Возможно где-то придется отредактировать стили по ситуации, подобрать оптимальную длину заметки после которой кат будет скрывать запись, и тому подобное. Стандартный шаблон plain здесь используется в качестве примера, намного лучше сделать его копию и переименовать, дабы при последующих обновлениях Эгеи ничего лишнего не перезаписалось.</p><p class="msg msg--info">Кстати, это репост <a href="https://old.fixel.ru/kat-v-egee/" target="_blank" rel="nofollow noopener noreferrer">моего поста</a>, который я написала ещё в 2018.</p><div class="mt-10 mt-desktop-20 tags"><a class="tag" href="https://fixel.ru/tag/blog/">Блог</a><a class="tag" href="https://fixel.ru/tag/veb/">Веб</a><a class="tag" href="https://fixel.ru/tag/gayd/">Гайд</a><a class="tag" href="https://fixel.ru/tag/egeya/">Эгея</a></div></article><nav columns="32" class="my-20 my-desktop-50 post-navigation"><div cell="10-16" cell-s="3-30" class="mb-mobile-05 nav-link prev"><a href="https://fixel.ru/restrim-s-raznym-bitreytom/" rel="prev"><span class="xxsmall">&larr;&nbsp;Ранее</span> <span class="xsmall">Рестрим с разным битрейтом</span></a></div><div cell="17-23" cell-s="3-30" class="nav-link next"><a href="https://fixel.ru/nastroyka-neskolkih-audiodorozhek-dlya-strimov-v-voicemeeter-banana/" rel="next"><span class="xxsmall">Позднее&nbsp;&rarr;</span> <span class="xsmall">Настройка нескольких аудиодорожек для стримов в Voicemeeter Banana</span></a></div></nav><section columns="32" class="post-comment"><div cell="10-23" cell-s="3-30"><script async src="https://comments.app/js/widget.js?3" data-dark="1" data-color="FFFFFF" data-comments-app-website="rySlsmoN" data-limit="15" data-page-id="39"></script></div></section></main><footer cell="10-23" cell-s="3-30" class="mb-10 footer"><div class="row row-top-xs"><div class="col-xs-12 col-lg-shrink"><p class="xsmall">Что есть?</p><p class="xxsmall"><a href="/all/blog">Блог</a> и <a href="/all/work">работы</a></p></div><div class="col-xs-12 col-lg-shrink mt-mobile-10"><p class="xsmall">Контакты</p><p class="xxsmall"><a target="_blank" href="tg://resolve?domain=sashatravkina">Телеграм</a> и <a target="_blank" href="mailto:hello@fixel.ru">почта</a></p></div><div class="col-xs-12 col-lg-shrink col-first-lg mt-mobile-10"><p class="xsmall">Александра Травкина</p><p class="xxsmall">14 мар. 2021</p></div></div></footer><svg class="goo-frame" width="0" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><filter id="goo"><feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"/><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="goo"/><feComposite in="SourceGraphic" in2="goo" operator="atop"/></filter></defs></svg><script defer="defer" src="https://fixel.ru/assets/js/jquery.js?v=a09e13ee94d51c524b7e2a728c7d4039"></script><script defer="defer" src="https://fixel.ru/assets/js/jquery.hyphen.ru.min.js?v=b6f6cb615804300135af19b7c9853b5f"></script><script defer="defer" src="https://fixel.ru/assets/js/highlight.js?v=e908440aece0dc31804cd794ecf2aab2"></script><script defer="defer" src="https://fixel.ru/assets/js/template.js?v=5205bd4210fdb44e07cde4238647bf31"></script><script type="text/javascript">var images = document.querySelectorAll('img[loading]'); for (var i = 0; i < images.length; i++) { if (images[i].complete) { images[i].classList.add('is-loaded'); } else { images[i].addEventListener('load', function () { this.classList.add('is-loaded'); }, false);}}</script></body></html>