<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><title>Как создать свой шаблон для Эгеи</title><meta name="description" content="Создать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя примеры."><meta name="keywords" content="Блог, Веб, Гайд, Эгея, CMS, "><meta name="author" content="Александра Травкина"><meta name="developer" content="hello@fixel.ru"><link rel="canonical" href="https://fixel.ru/kak-sozdat-svoy-shablon-dlya-egei/"><meta property="og:title" content="Как создать свой шаблон для Эгеи"><meta property="og:site_name" content="Александра Травкина"><meta property="og:description" content="Создать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя примеры."><meta property="og:url" content="https://fixel.ru/kak-sozdat-svoy-shablon-dlya-egei/"><meta property="og:type" content="article"><link rel="alternate" type="application/atom+xml" href="https://fixel.ru/feed.xml"><link rel="alternate" type="application/json" href="https://fixel.ru/feed.json"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="apple-touch-icon" sizes="180x180" href="https://fixel.ru/assets/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://fixel.ru/assets/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://fixel.ru/assets/favicon/favicon-16x16.png"><link rel="manifest" href="https://fixel.ru/assets/favicon/site.webmanifest"><link rel="mask-icon" href="https://fixel.ru/assets/favicon/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification" content="dwjd3hkjvkoN4sqwgiC9Mgf5tTpjN8XDhuYDWACpsII"><meta name="yandex-verification" content="f96ef0e811161c03"><meta name="mailru-verification" content="cfccb8882d571397"><link rel="stylesheet" href="https://fixel.ru/assets/css/style.css?v=3a1511b7856a46f94a7dc862dd0c19b0"><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(50392522, "init", { clickmap: true, trackLinks: true, accurateTrackBounce: true, trackHash: true });</script><noscript><div><img src="https://mc.yandex.ru/watch/50392522" style="position:absolute; left:-9999px;" alt=""></div></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fixel.ru/kak-sozdat-svoy-shablon-dlya-egei/"},"headline":"Как создать свой шаблон для Эгеи","datePublished":"2020-06-11T20:05","dateModified":"2021-03-08T17:04","description":"Статья может быть устаревшей и не всё написанное в ней может отражать действительность, так как Эгея периодически обновляется. Пользовательские темы находятся в папке ../themes в корне блога. Создадим в этом каталоге папку и назовем её так, как хотим чтобы называлась наша будущая тема. Например «сherry»&hellip;","author":{"@type":"Person","name":"Блог"},"publisher":{"@type":"Organization","name":"Блог"}}</script></head><body columns="32"><nav cell="6-27" cell-s="row" class="py-10 breadcrumbs"><div columns="22" columns-s="32"><div cell="4-19" cell-s="3-30" class="breadcrumbs-content"><div class="row row-middle-xs"><div class="col-xs-shrink"><p><a href="https://fixel.ru/">Александра Травкина</a></p></div><div class="col-xs-shrink px-00"><p><i class="las la-angle-left"></i></p></div><div class="col-xs-shrink"><p><a href="https://fixel.ru/all/blog">Блог</a></p></div><div class="col-xs-shrink px-00 hidden-from-mobile"><p><i class="las la-angle-left"></i></p></div><div class="col-xs hidden-from-mobile"><p>Как создать свой шаблон для Эгеи</p></div></div></div></div></nav><main cell="6-27" cell-s="row" class="mb-20 post-article"><header columns="22" columns-s="32" class="pt-20 pt-desktop-50 pb-20 article-header"><div cell="4-19" cell-s="3-30"><h1>Как создать свой шаблон для Эгеи</h1></div><div cell="4-15" cell-s="3-30" class="mt-20"><p>Создать свой шаблон для Эгеи не так сложно как может показаться на первый взгляд. Давайте разберем основные принципы построения шаблона используя некоторые простые примеры.</p></div></header><article columns="22" columns-s="32" class="pb-20 article-content"><p class="msg msg--warning">Статья может быть устаревшей и не всё написанное в ней может отражать действительность, так как Эгея периодически обновляется.</p><p>Пользовательские темы находятся в папке ../themes в корне блога. Создадим в этом каталоге папку и назовем её так, как хотим чтобы называлась наша будущая тема. Например «сherry» — ../themes/сherry. Информация о теме хранится в файле theme-info.php её корневой папки и содержит следующий код:</p><pre class="line-numbers language-php">&lt;?php return array (<br><br>  <em>/* Порядок темы в списке тем в админке */</em><br>  'index' =&gt; 99,<br><br>  <em>/* Отображаемое название темы для разных языков */</em><br>  'display_name' =&gt; array (<br>    'en' =&gt; 'Cherry',<br>    'ru' =&gt; 'Вишня',<br>    'uk' =&gt; 'Вишня',<br>  ),<br><br>  <em>/* Параметры основных цветов */</em><br>  'colors' =&gt; array (<br>    'background' =&gt; '#faebd2',<br>    'headings' =&gt; '#000',<br>    'text' =&gt; '#000',<br>    'link' =&gt; '#3d6077',<br>  ),<br><br>  <em>/* На какой теме основана текущая тема */</em><br>  'based_on' =&gt; 'plain',<br><br>  <em>/* Параметры метатега viewport */</em><br>  'meta_viewport' =&gt; 'width=device-width, initial-scale=1',<br><br>  <em>/* Поддержка тёмного режима */</em><br>  'supports_dark_mode' =&gt; false,<br><br>); ?&gt;</pre><p>В папке темы также существует несколько папок из которых Эгея подхватывает скрипты, стили, изображения и файлы разметки:</p><pre class="line-numbers language-html">../themes/сherry/images — Изображения<br>../themes/сherry/js — JS скрипты<br>../themes/сherry/src — Исходные sass/less файлы стилей<br>../themes/сherry/styles — CSS стили<br>../themes/сherry/templates — PHP файлы шаблона</pre><p>Если файлов в папках нет, они будут подхватываться из стандартной темы Эгеи, которая находится по пути ../system/theme, либо из темы указанной как базовая в конфигурационном файле theme-info.php.</p><p class="msg msg--warning">Чтобы внести изменения в стандартные шаблоны Эгеи, скопируйте необходимый файл из ../system/theme/templates в папку templates вашей темы и уже там производите все изменения. Вносить правки в системной папке не стоит, так как после обновления движка все изменения исчезнут.</p><p>Теперь стоит подробнее разобрать содержимое папки templates, для наглядности того, как выглядит тот или иной элемент в живую, я добавила соответствующие файлам скриншоты.</p><section class="section"><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/26.png" alt=""><figcaption>user-picture.tmpl.php — Аватар блога.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/01.png" width="" height=""><figcaption>author-menu.tmpl.php — Меню автора.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/25.png" alt=""><figcaption>search-heading.tmpl.php — Форма поиска.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/20.png" alt=""><figcaption>notes.tmpl.php — Пост.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/23-3.png" alt=""><figcaption>pages.tmpl.php — Навигация между постами.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/02-3.png" alt=""><figcaption>comments-heading.tmpl.php — Заголовок списка комментариев с счетчиком их количества.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/03-2.png" alt=""><figcaption>comments.tmpl.php — Список комментариев.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/05-2.png" alt=""><figcaption>form-comment.tmpl.php — Форма комментария.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/19-2.png" alt=""><figcaption>form-comment-reply.tmpl.php — Форма ответа на комментарий.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/24.png" alt=""><figcaption>popular.tmpl.php — Блок популярных постов.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/21-2.png" alt=""><figcaption>pages-earlier.tmpl.php — Кнопка к постам «Ранее».</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/22-2.png" alt=""><figcaption>pages-later.tmpl.php — Кнопка к постам «Позднее».</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/27-2.png" alt=""><figcaption>notes-list.tmpl.php — Список всех постов блога.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/17-2.png" alt=""><figcaption>heading.tmpl.php — Заголовки на большинстве страниц.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/11.png" alt=""><figcaption>form-note.tmpl.php — Форма публикации поста.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/09.png" alt=""><figcaption>form-note-delete.tmpl.php — Форма удаления поста.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/10-2.png" alt=""><figcaption>form-note-publish.tmpl.php — Кнопка публикации поста.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/04-2.png" alt=""><figcaption>drafts.tmpl.php — Список черновиков.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/14.png" alt=""><figcaption>form-preferences.tmpl.php — Форма общих настроек блога.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/12-2.png" alt=""><figcaption>form-password.tmpl.php — Форма смены админ-пароля.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/06-2.png" alt=""><figcaption>form-database.tmpl.php — Форма подключения к базе данных.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/30.png" alt=""><figcaption>sessions.tmpl.php — Список текущих сессий.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/07-2.png" alt=""><figcaption>form-install.tmpl.php — Форма установки Эгеи.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/08.png" alt=""><figcaption>form-login.tmpl.php — Форма авторизации.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/28.png" alt=""><figcaption>tags.tmpl.php — Список всех тегов блога.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/15.png" alt=""><figcaption>form-tag.tmpl.php — Форма редактирования тега.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/16.png" alt=""><figcaption>form-tag-delete.tmpl.php — Форма удаления тега.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/29-3.png" alt=""><figcaption>tags-menu.tmpl.php — Меню избранных тегов.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/33.png" alt=""><figcaption>form-search.tmpl.php — Форма поиска на странице поиска.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/18-2.png" alt=""><figcaption>login-element.tmpl.php — Кнопка авторизации в футере.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/31-3.png" alt=""><figcaption>form-password-reset-email.tmpl.php — Страница сброса пароля.</figcaption></figure><figure class="post__image"><img loading="lazy" src="https://fixel.ru/media/posts/24/32-2.png" alt=""><figcaption>layout.tmpl.php — Основная разметка шаблона внутри body, здесь подключаются другие части шаблона.<br>main.tmpl.php — Разметка внутри html, здесь подключается head.tmpl.php содержащий метатеги, сам layout.tmpl.php, js и css.</figcaption></figure></section><p>Эти файлы можно копировать в папку templates своей темы и редактировать на свой вкус.</p><p>Подключить свою собственную часть шаблона можно создав файл типа name.tmpl.php в папке templates и затем вызвать его в любом другом месте или в layout.tmpl.php. Например, можно создать файл menu.tmpl.php со своим меню и ссылками на соц-сети, сверстанными на html и css, и вызвать его в layout.tmpl.php специальным макросом. Илья Бирман в <a href="https://docs.google.com/document/d/1yn7KCHq47oli7IH--skhymjjj2OSlXjcyGOxZ2ZEPeA/edit#heading=h.j2h2wr6xhlie" target="_blank" rel="nofollow noopener noreferrer">справке</a> к Эгее пишет:</p><p class="msg msg--info">Шаблон может вызывать другие шаблоны для отображения конкретного фрагмента: _T () — вызывает шаблон по имени. (...) Шаблон layout.tmpl.php «срабатывает» потому, что main.tmpl.php вызывает его для формирования тела страницы.</p><p>Так, чтобы вывести содержимое файла menu.tmpl.php где нибудь на сайте, достаточно небольшого кода:</p><pre class="line-numbers language-php">&lt;?php _T ('menu') ?&gt;</pre><p>К слову, если вам нужно вывести часть шаблона, скажем, только на главной странице, но не на странице поста, оберните код вывода следующим уточнением:</p><pre class="line-numbers language-php">&lt;?php if ($content['class'] == 'frontpage') { ?&gt;<br>    &lt;?php _T ('menu') ?&gt;<br>&lt;?php } ?&gt;</pre><p>Или, если нужно вывести эту часть шаблона только на странице поста:</p><pre class="line-numbers language-php">&lt;?php if ($content['class'] == 'note') { ?&gt;<br>   &lt;?php _T ('menu') ?&gt;<br>&lt;?php } ?&gt;</pre><p>JS и CSS в тему Эгеи тоже подключаются специальными макросами. Для наглядности откройте стандартный main.tmpl.php и посмотрите в конец файла, после закрывающего тега body:</p><pre class="line-numbers language-php">&lt;?php _CSS ('main') ?&gt;<br>&lt;?php _JS ('main') ?&gt;</pre><p>Здесь подхватываются ../js/main.js и ../styles/main.css из папки темы, или из стандартной темы, если нет соответствующих файлов. По такому принципу можно добавить, например, скрипт bootstrap.min.js в папку js и подключить его кодом:</p><pre class="line-numbers language-php">&lt;?php _JS ('bootstrap.min') ?&gt;</pre><p>Таким образом можно редактировать отдельные части шаблона Эгеи при создании своей темы, подключать стили и скрипты. Также, для более полной информации, рекомендую ознакомится с <a href="https://docs.google.com/document/d/1yn7KCHq47oli7IH--skhymjjj2OSlXjcyGOxZ2ZEPeA/edit" target="_blank" rel="nofollow noopener noreferrer">официальной документацией</a> по темам оформления Эгеи.</p></article><footer columns="22" columns-s="32" class="pb-20 pb-desktop-50 article-footer"><div cell="4-19" cell-s="3-30" class="tags"><a class="tag" href="https://fixel.ru/tag/blog/">Блог</a> <a class="tag" href="https://fixel.ru/tag/veb/">Веб</a> <a class="tag" href="https://fixel.ru/tag/gayd/">Гайд</a> <a class="tag" href="https://fixel.ru/tag/egeya/">Эгея</a> <a class="tag" href="https://fixel.ru/tag/cms/">CMS</a></div></footer></main><footer cell="9-24" cell-s="3-30" class="mb-10 footer"><div class="row row-top-xs"><div class="col-xs-12 col-lg-shrink"><p class="xsmall">Что есть?</p><p class="xxsmall"><a href="/all/blog">Блог</a> и <a href="/all/work">работы</a></p></div><div class="col-xs-12 col-lg-shrink mt-mobile-10"><p class="xsmall">Контакты</p><p class="xxsmall"><a target="_blank" href="tg://resolve?domain=sashatravkina">Телеграм</a> и <a target="_blank" href="mailto:hello@fixel.ru">почта</a></p></div><div class="col-xs-12 col-lg-shrink col-first-lg mt-mobile-10"><p class="xsmall">Александра Травкина</p><p class="xxsmall">11 июня 2020</p></div></div></footer><svg class="goo-frame" width="0" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1"><defs><filter id="goo"><feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"/><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -9" result="goo"/><feComposite in="SourceGraphic" in2="goo" operator="atop"/></filter></defs></svg><script defer="defer" src="https://fixel.ru/assets/js/jquery.js?v=a09e13ee94d51c524b7e2a728c7d4039"></script><script defer="defer" src="https://fixel.ru/assets/js/jquery.hyphen.ru.min.js?v=b6f6cb615804300135af19b7c9853b5f"></script><script defer="defer" src="https://fixel.ru/assets/js/highlight.js?v=e908440aece0dc31804cd794ecf2aab2"></script><script defer="defer" src="https://fixel.ru/assets/js/template.js?v=df3b3ed4afbd218ce6078db205a3d65b"></script><script type="text/javascript">var images = document.querySelectorAll('img[loading]'); for (var i = 0; i < images.length; i++) { if (images[i].complete) { images[i].classList.add('is-loaded'); } else { images[i].addEventListener('load', function () { this.classList.add('is-loaded'); }, false);}}</script></body></html>